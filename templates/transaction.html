{% extends "layout.html" %}

{% block title %}
    Transactions
{% endblock %}

{% block body %}
    <header id="transaction-header">
        <nav class="navbar navbar-expand-sm">
        <div class="container-fluid">
            <a class="navbar-brand" href="/">
            <img src="/static/Logo.jpg" alt="Logo" style="width:50px;" class="rounded-pill"> 
            Yuki Store
            </a>
            <form>
            <div class="input-group rounded-pill">
                <input class="form-control" type="text" placeholder="Search For Me">
                <button class="btn">
                <i class="fas fa-search"></i>
                </button>
            </div>
            </form>
            <ul class="navbar-nav m-2">
            {% if user %}
            <li class="nav-item me-5">
                <span class="nav-link">Welcome, {{ user[0]['account'] }}</span>
            </li>
            <li class="nav-item me-5">
                <a class="nav-link" href="/logout">Log Out</a>
            </li>
            {% else %}
            <li class="nav-item me-5">
                <a class="nav-link" href="/login">Log In</a>
            </li>
            <li class="nav-item me-5">
                <a class="nav-link" href="/register">Register</a>
            </li>
            {% endif %}
            <li class="nav-item me-5">
                <a class="nav-link" href="/collection">Collections</a>
            </li>
            <li class="nav-item me-5">
                <a class="nav-link" href="/transaction">Transactions</a>
            </li>
            <li class="nav-item" style="margin-right: 15px;">
                <a class="nav-link" href="/help">Help</a>
            </li>
            </ul>
        </div>
        </nav>
    </header>
    <main id="transaction-main">
        <div class="d-flex justify-content-center transaction-history">
            <p>Transactions History</p>
        </div>
        <div class="d-flex flex-wrap justify-content-center">
        {% if transactions %}
        <table  class="text-center" border="0" cellpadding="20" cellspacing="0">
            <thead>
                <tr style="border-bottom: solid;">
                    <th>Order Code</th>
                    <th>Item Image</th>
                    <th>Item ID</th>
                    <th>Item Name</th>
                    <th>Price</th>
                    <th>Pay</th>
                    <th>Status</th>
                    <th>Order Date</th>
                </tr>
            </thead>
            <tbody>
                {% for transaction in transactions %}
                <tr style="border-bottom: solid;">
                    <td>{{ transaction.order_code }}</td>
                    <td><img src="/static/Collection/item/{{transaction.item_id}}/{{transaction.item_id}}.jpg"></td>
                    <td>{{ transaction.item_id }}</td>
                    <td>{{ transaction.item_name }}</td>
                    <td>{{ transaction.item_price }}</td>
                    <td>{{ transaction.pay }}</td>
                    <td>{{ transaction.status }}</td>
                    <td>{{ transaction.transaction_date }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <p>No transactions found.</p>
        {% endif %}
        </div>
    </main>
{% endblock %}
